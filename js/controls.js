// Generated by CoffeeScript 1.6.3
(function() {
  this.Controls = (function() {
    function Controls(_opts) {
      this.options = _opts;
      this.initGUI();
      this.setupEventListeners();
    }

    Controls.prototype.app = function() {
      return this.options.app;
    };

    Controls.prototype.bind = function(scope, fn) {
      return function() {
        return fn.apply(scope, arguments);
      };
    };

    Controls.prototype.setupEventListeners = function() {
      document.addEventListener('mousedown', this.bind(this, this.mousedown), false);
      return document.addEventListener('keydown', this.bind(this, this.keydown), false);
    };

    Controls.prototype.mousedown = function(event) {
      return;
      event.preventDefault();
      event.stopPropagation();
      console.log("Mousedown - creating random disturbance");
      this.app().disturbances.push(new DisturbancePicker({
        grid: this.app().grid
      }).createDisturbance());
      return this.app().createDisturbance();
    };

    Controls.prototype.keydown = function(event) {
      console.log("Keydown (event.which = " + event.which + ")");
      if (event.which >= 48 && event.which <= 57) {
        this.app().disturbances.push(new DisturbancePicker({
          grid: this.app().grid
        }).indexDisturbance(event.which - 48));
      }
      if (event.which === 27) {
        console.log('[ESC] clearing disturbances array');
        this.app().disturbances = [];
        this.app().grid.reset();
      }
      if (event.which === 32) {
        this.app().togglePause();
      }
      if (event.which === 13) {
        this.app().renderer.preserveDrawingBuffer = true;
        return window.open(this.app().renderer.domElement.toDataURL('image/png'), 'screenshot');
      }
    };

    Controls.prototype.initGUI = function() {
      var control, folder;
      this.gui = new dat.GUI();
      folder = this.gui.addFolder('Parameters');
      control = folder.add({
        gridPosX: -2200
      }, 'gridPosX', -3000, 0);
      control.onChange(function(value) {
        return console.log("Let's change grid pos to " + value);
      });
      return this.gui.addFolder('Actions');
    };

    return Controls;

  })();

}).call(this);
